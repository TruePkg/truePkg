!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=33)}([function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("stack-trace")},function(e,t){e.exports=require("debug")},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(3)),o=a(r(2)),u=a(r(1));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=function(){var e=u.default.get();if(e.length>1){var t=e[2],r=n.default.basename(t.getFileName()).replace(".js",""),o=t.getFunctionName();return" "+r+":"+(o||"anonymous")+":"+t.getLineNumber()}return" "},r={log:(0,o.default)("TP:"+e+t()),error:(0,o.default)("TP:"+e+t())};return r.log.log=console.log.bind(console),r.error.log=console.error.bind(console),r}},function(e,t,r){"use strict";var n=(0,function(e){return e&&e.__esModule?e:{default:e}}(r(4)).default)("hello").log;t.plugin={name:"smd",register:async function(e,t){return e.route({method:"GET",path:"/hello",handler:async function(e,t){return n("hi"),"it works"}}),Promise.resolve()}}},function(e,t){e.exports="type Item {\n  _id: ID!\n  name: String,\n  description: String,\n  price: String,\n  agentid: ID\n}\n\nextend type Query {\n  getItemByName(name: String!): Item\n}"},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0));var o=n.default.Schema,u=new o({description:{type:String},name:{type:String},sku:{type:String},price:{type:Number},agentid:{type:o.ObjectId,ref:"Users"}}),a=void 0;try{a=n.default.model("Items",u)}catch(e){a=n.default.model("Items")}e.exports=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.itemResolvers=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(7));t.itemResolvers={Query:{getItemByName:async function(e,t){return await n.default.findOne({name:t.name})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.itemType=t.itemResolvers=void 0;var n=r(8);Object.defineProperty(t,"itemResolvers",{enumerable:!0,get:function(){return n.itemResolvers}});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(6));t.itemType=o},function(e,t){e.exports="type Customer {\n  _id: ID!\n  name: String!\n  agentid: ID!\n  status: String\n}\n\nextend type Query {\n  getCustomerByName(name: String): Customer\n}\n\nextend type Mutation {\n  createCustomer(name: String!, agentid: ID!, status: String): Customer\n}"},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0));var o=n.default.Schema,u=new o({name:{type:String,default:""},agentid:{type:o.ObjectId,ref:"Users"},status:{type:String}}),a=void 0;try{a=n.default.model("Customers",u)}catch(e){a=n.default.model("Customers")}e.exports=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customerResolvers=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(11));t.customerResolvers={Query:{getCustomerByName:async function(e,t){return await n.default.findOne({name:t.name})}},Mutation:{createCustomer:async function(e,t){return console.log(t),await n.default.findOneAndUpdate({name:t.name},{$set:{name:t.name,agentid:t.agentid,status:"prospect"}},{new:!0,upsert:!0})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customerType=t.customerResolvers=void 0;var n=r(12);Object.defineProperty(t,"customerResolvers",{enumerable:!0,get:function(){return n.customerResolvers}});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(10));t.customerType=o},function(e,t){e.exports="type User {\n  _id: ID!\n  name: String!\n  gender: String\n  managerid: [String]\n  customerids: [String]\n}\n\ntype Query {\n  getUser(name: String, gender: String): User\n  users: [User]\n}\n\ntype Mutation {\n  createUser(name: String, gender: String): User\n}"},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(r(0));var o=n.default.Schema,u=new o({name:{type:String,default:""},roles:[{type:String}],gender:{type:String,default:"male"},managerid:{type:o.ObjectId,ref:"Users"},customerids:[{type:o.ObjectId,ref:"Customers"}],createdAt:{type:String},updatedAt:{type:String}}),a=void 0;try{a=n.default.model("Users",u)}catch(e){a=n.default.model("Users")}e.exports=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userResolvers=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(15));t.userResolvers={Query:{getUser:async function(e,t){console.log(e,t);var r=void 0;return t.name&&(r=await n.default.findOne({name:t.name})),t.gender&&(r=await n.default.findOne({gender:t.gender})),r}},Mutation:{createUser:async function(e,t){return console.log(e,t),await n.default.findOneAndUpdate({name:t.name},{$set:{name:t.name,gender:t.gender}},{new:!0,upsert:!0})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userType=t.userResolvers=void 0;var n=r(16);Object.defineProperty(t,"userResolvers",{enumerable:!0,get:function(){return n.userResolvers}});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(14));t.userType=o},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("graphql-tools")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19),o=function(e){return e&&e.__esModule?e:{default:e}}(r(18)),u=r(17),a=r(13),s=r(9);var i=(0,n.makeExecutableSchema)({typeDefs:["\nschema {\n  query: Query\n  mutation: Mutation\n}\n",u.userType.default,a.customerType.default,s.itemType.default],resolvers:o.default.merge({},u.userResolvers,a.customerResolvers,s.itemResolvers)});t.default=i},function(e,t){e.exports=require("apollo-server-hapi")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(21),o=function(e){return e&&e.__esModule?e:{default:e}}(r(20));t.default={plugin:n.graphqlHapi,options:{path:"/graphql",graphqlOptions:function(e){var t=e.payload;return console.log(t,"<-- our graphQL request body"),{schema:o.default}}}}},function(e,t){e.exports=require("events")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){return e&&e.__esModule?e:{default:e}})(r(23)).default.EventEmitter.prototype._maxListeners=100,process.setMaxListeners(100),t.default={port:process.env.PORT,host:"0.0.0.0",routes:{cors:!0}}},function(e){e.exports={name:"TruePackage",version:"1.0.0",description:"wond api",scripts:{test:'echo "Error: no test specified" && exit 1',start:"nodemon -- --inspect --debug ./node_modules/.bin/sls offline start -r us-east-1 --noTimeout --skipCacheInvalidation",deploy:"sls deploy -s production -v",logs:"sls logs -s production -t -f api"},main:"index.js",license:"MIT",dependencies:{"apollo-server-hapi":"^1.3.6","babel-core":"^6.26.3","babel-eslint":"^8.2.5","babel-loader":"^7.1.5","babel-plugin-istanbul":"^4.1.6","babel-plugin-source-map-support":"^2.0.1","babel-polyfill":"^6.26.0","babel-preset-es2015":"^6.24.1","babel-preset-stage-3":"^6.24.1","babel-runtime":"^6.26.0",bluebird:"^3.5.1",confidence:"^3.0.2","eslint-config-walmart":"^2.2.1","eslint-plugin-filenames":"^1.3.2","eslint-plugin-import":"^2.13.0",glue:"^5.0.0",graphql:"^0.13.2","graphql-custom-types":"^1.4.0","graphql-depth-limit":"^1.1.0","graphql-playground-middleware-hapi":"^1.7.2","graphql-playground-middleware-lambda":"^1.7.2","graphql-query-complexity":"^0.1.2","graphql-relay":"^0.5.5","graphql-tag":"^2.9.2","graphql-tools":"^3.0.5",hapi:"^17.5.2","js-yaml":"^3.12.0",lodash:"^4.17.10",mongoose:"^5.2.2",nodemon:"^1.17.5","prettier-eslint-cli":"^4.7.1","raw-loader":"^0.5.1",request:"^2.87.0","request-promise":"^4.2.2",serverless:"^1.28.0","serverless-domain-manager":"^2.6.0","serverless-offline":"^3.25.6","serverless-offline-scheduler":"^0.3.3","serverless-secrets-plugin":"^0.1.0","serverless-webpack":"^5.2.0",webpack:"^4.15.1","webpack-node-externals":"^1.7.2"}}},function(e,t){e.exports=require("confidence")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(26)),o=a(r(25)),u=a(r(24));function a(e){return e&&e.__esModule?e:{default:e}}var s={env:"production",dockerEnv:process.env.DOCKER_ENV},i={$meta:"main server config",pkg:o.default,server:u.default},l=new n.default.Store(i);t.default={get:function(e){return l.get(e,s)},load:function(e){return l.load(e)},store:l}},function(e,t){e.exports=require("graphql-playground-middleware-hapi")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(28));t.default={plugin:n.default,options:{path:"/playground",endpoint:"/graphql"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(29)),o=a(r(27)),u=a(r(22));function a(e){return e&&e.__esModule?e:{default:e}}var s={$meta:"main server manifest",server:o.default.get("/server"),register:{plugins:[{plugin:r(5)},u.default,n.default]}};t.default=s},function(e,t){e.exports=require("graphql-playground-middleware-lambda")},function(e,t){e.exports=require("hapi")},function(e,t,r){"use strict";var n=s(r(32)),o=s(r(0)),u=s(r(31)),a=s(r(30));function s(e){return e&&e.__esModule?e:{default:e}}var i=null,l=process.env.MONGODB_URI;t.handler=async function(e,t){try{null===i&&(i=new n.default.Server({host:"localhost",port:3001,routes:{cors:!0}}),await i.register(a.default.register.plugins)),await i.start(),o.default.connect(l,{}).then(function(){console.log("connected to mongo db")}).catch(function(e){console.log(e,"asfsafsaf")})}catch(e){return console.log("asdfsadf",e),e}var r=e.path,u=e.queryStringParameters,s=e.httpMethod,d=e.body,c=e.headers,f=r;if(u){var p=Object.keys(u).map(function(e){return e+"="+u[e]});p.length>0&&(f=f+"?"+p.join("&"))}var g=await i.inject({method:s,url:f,payload:d,headers:c,validate:!1}),m=g.statusCode,v=g.headers,y=g.result;return delete v["content-encoding"],delete v["transfer-encoding"],{statusCode:m,headers:v,body:y}},t.playground=(0,u.default)({endpoint:"/graphql"})}]));
//# sourceMappingURL=handler.js.map